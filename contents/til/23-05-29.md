---
isTIL: true
date: "2023-05-29"
title: "CDN과 무상태 웹 계층"
categories: ["Review"]
summary: "CDN과 무상태 웹 계층 알아보기."
thumbnail: "./23-05-29-th.jpg"
---


## CDN
- 정적 컨텐츠를 전송하는데 쓰이는, 지리적으로 분산된 서버의 네트워크
- 이미지, CSS 비디오, JS 파일 등을 캐시할 수 있음
- 동작 방식
  - 어떤 사용자가 웹사이트를 방문
  - 그 사용자에게 가장  가까운 CDN 서버가 정적 컨텐츠를 전송
  - 만약 해당 자료가 없는 경우 CDN 서버는 원본 서버에 요청하여 파일을 가져옴
  - 원본 서버가 파일을 CDN 서버에 반환, 이때 해당 파일이 얼마나 오래 캐시될 수 있는지 나타내는 TTL(Time-To-Live) 값 포함 
- 고려 사항
  - 비용
    - 제 3 사업자에 의해 보통 운영
    - 자주 사용되지 않는 콘텐츠를 캐싱하는 것은 손해
  - 적절한 만료 시한 설정
    - 너무 길다면 컨텐츠의 신선도가 떨어진다
    - 너무 쩗다면 원본 서버의 부하가 심해진다
  - CND 장애에 대한 대처 방안
    - 일시적 장애의 경우 해당 문제를 감지하여 원본 서버로부터 직접 컨텐츠를 가져올 수 있도록 하는 등의 테크닉
  - 컨텐츠 무효화 (invalidation)
    - 아직 만료되지 않은 컨텐츠라 하더라도 특정 파일을 CDN에서 제거하기
    - CDN 서비스 사업자가 제공하는 API 이용한 컨텐츠 무효화
    - 컨텐츠의 다른  버전을 서비스하도록 오브젝트 버저닝 이용
  
  ## 무상태 (stateless) 웹 계층
  - 웹 계층을 수평적으로 확장하려면? -> 상태 정보를 웹 계층에서 제거하기
  - 상태 정보를 관계형 DB나 NoSQL와 같은 지속성 저장소에 보관하고 필요할 때 가져오도록 하기
  - 웹 서버는 상태 정보가 필요할 경우 공유 저장소로부터 데이터를 가져오도록 하기
  - 이를 바탕으로 트래픽 양에 따라 웹 서버를 넣거나 빼기만 하여 규모를 조절할 수 있다


## Reference
- 가상 면접 사례로 배우는 대규모 시스템 설계기초 (알렉스 쉬)




